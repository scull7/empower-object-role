// Generated by CoffeeScript 1.10.0
(function() {
  var Map;

  Map = (function() {
    var EMPTY_LIST, NIL_HANDLER;

    EMPTY_LIST = [];

    NIL_HANDLER = function(context, objectId, done) {
      return done(null, EMPTY_LIST);
    };

    function Map() {
      this.map = {};
    }

    Map.prototype.addHandler = function(objectName, handler) {
      if (typeof handler !== 'function') {
        throw new TypeError('handler must be a function');
      }
      if (handler.length !== 3) {
        throw new TypeError('handler must have an arity of 3 (ctx, id, done)');
      }
      if (this.hasHandler(objectName)) {
        throw new Error("Handler for " + objectName + " already exists");
      }
      this.map[objectName] = handler;
      return this;
    };

    Map.prototype.hasHandler = function(objectName) {
      return this.map.hasOwnProperty(objectName);
    };

    Map.prototype.getHandler = function(objectName) {
      if (this.hasHandler(objectName)) {
        return this.map[objectName];
      } else {
        return NIL_HANDLER;
      }
    };

    Map.prototype.getRoles = function(objectName, context, id, done) {
      return (this.getHandler(objectName))(context, id, done);
    };

    return Map;

  })();

  module.exports = function() {
    return new Map();
  };

}).call(this);
